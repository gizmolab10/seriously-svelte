<script lang='ts'>
	import { k, u, Size, Point, colors, T_Layer, svgPaths } from '../ts/common/Global_Imports';
    import { w_id_popupView, w_background_color } from '../ts/common/Stores';
	import Mouse_Responder from './Mouse_Responder.svelte';
	import SVGD3 from '../kit/SVGD3.svelte';
	interface Props {
		name?: string;
		size?: number;
	}

	let { name = 'generic close', size = 20 }: Props = $props();
	let stroke = $state(colors.default);
	let fill = $state($w_background_color);

	function hover_up_closure(s_mouse) {
		if (s_mouse.isHover) {
			const isHovering = !s_mouse.isOut;
			fill = isHovering ? colors.default : $w_background_color;
			stroke = isHovering ? $w_background_color : colors.default;
		} else if (s_mouse.isUp) {
			$w_id_popupView = null;
		}
	}

</script>

<Mouse_Responder
	name={name}
	width={size}
	height={size}
	align_left={false}
	origin={new Point(8, size / 2)}
	handle_mouse_state={hover_up_closure}>
    <SVGD3 name='close'
		fill={fill}
		width={size}
		height={size}
		stroke={colors.default}
		svgPath={svgPaths.circle_atOffset(size, size - 2)}
	/>
    <SVGD3 name='closeInside'
		width={size}
		height={size}
		stroke={stroke}
		svgPath={svgPaths.x_cross(size, size / 6)}
	/>
</Mouse_Responder>
