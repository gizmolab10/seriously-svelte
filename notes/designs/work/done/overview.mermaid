```mermaid
flowchart TB
    subgraph User["User Interaction"]
        Mouse["Mouse/Touch"]
        Keyboard["Keyboard"]
    end

    subgraph UI["UI Layer"]
        Svelte["Svelte Components"]
        Stores["w_* Stores"]
    end

    subgraph Managers["Manager Layer"]
        UX["UX<br/>focus, grabs, edit"]
        Hits["Hits<br/>mouse dispatch"]
        Geometry["Geometry<br/>layout"]
        Styles["Styles<br/>colors"]
        Search["Search<br/>find things"]
    end

    subgraph State["State Layer"]
        S_Objects["S_* Objects<br/>persist across re-renders"]
        Hierarchy["Hierarchy<br/>thing tree"]
    end

    subgraph Data["Data Layer"]
        Persistable["Persistable<br/>Thing, Trait, Tag, Relationship"]
        DB["Databases<br/>Firebase / Airtable / Local"]
    end

    Mouse --> Hits
    Keyboard --> UX
    Hits --> UX
    UX --> Stores
    Stores --> Svelte
    Svelte --> Geometry
    Geometry --> S_Objects
    S_Objects --> Stores
    UX --> Hierarchy
    Hierarchy --> Persistable
    Persistable --> DB
    Styles --> Svelte
    Search --> Hierarchy
```
