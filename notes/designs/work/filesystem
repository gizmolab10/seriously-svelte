# Work: Filesystem

Started: 2025-01-04

## Problem

Need a way to visualize filesystem folders in webseriously. Currently no database plugin exists that can scan a folder and represent files/folders as Things with navigable relationships.

## Goal

Build `DB_Filesystem` plugin that:
1. Takes a folder path as input
2. Creates Things from files/folders
3. Creates Relationships (parentâ†’child folder structure)
4. Each Thing gets a `link` Trait that opens the file via OS default app


## Approach

**Browser constraints:**
- True "open in OS app" impossible from pure web app (security)
- File System Access API for folder reading (Chrome/Edge ~70% desktop)
- No Tauri/Electronâ€”keep as web app

**Solution:**
1. Use File System Access API to read folder contents
2. Create Things from files/folders
3. Create Relationships for parentâ†’child structure
4. `link` trait stores file handle
5. Click â†’ in-app preview (images, text, PDF, video, audio) + download button
6. Copy-path button for manual OS opening

**Limitations:** Safari/Firefox users won't get folder picking (can still manually add files)

## Notes

ðŸ”– RESUME POINT: DB_Filesystem plugin created and registered

### Done
- [x] Added `filesystem` to T_Database and DB_Name enums
- [x] Created DB_Filesystem.ts with:
  - File System Access API integration
  - Recursive folder scanning
  - Thing creation per file/folder
  - Relationship creation (contains)
  - Link trait with file path
  - Helper methods: readFileAsText, readFileAsDataURL, downloadFile, copyPath
  - Color coding by file extension
- [x] Registered in Databases.ts (db_forType + db_next_get cycle)

### TODO
- [ ] Test the plugin
- [ ] Create file preview component
- [ ] Handle link trait click â†’ preview/download

